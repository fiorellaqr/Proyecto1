<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
  <link rel="icon" href="img/Logo.png" />
  <link rel="stylesheet" href="css/hombres.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@200;300;400&display=swap" rel="stylesheet">
  <script src="https://kit.fontawesome.com/638ca44e0a.js" crossorigin="anonymous"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk="
    crossorigin="anonymous"></script>
  <title>Ropa de Hombre</title>
</head>

<body>

  <div class="fijar">
    <div class="menu">
      <input type="checkbox" id="btn-menu">
      <label for="btn-menu"><i class="fa-solid fa-bars"></i></label>
      <h1><a href="index.html">MiTienda</a></h1>
      <div class="menu-item">
        <p><a href="index.html"><b>Inicio</b></a></p>
        <p><a href="nosotros.html"><b>Nosotros</b></a></p>
        <div class="item-catalogo">
          <p><b>Catalogo</b></p>
          <ul>
            <li><a href="hombres.html">Varones</a></li>
            <li><a href="mujeres.html">Damas</a></li>
            <li><a href="Niños.html">Infantes</a></li>
          </ul>
        </div>
        <p><a href="#contactanos"><b>Contactanos</b></a></p>
        <p><a href="Login.html"><b>Login</b></a></p>
        <p>
          <b><a href="carrito.html"><i class="fa-solid fa-cart-shopping"></i></a></b>
        </p>
      </div>
    </div>
  </div>

  <div style="padding-top: 6% ;">
    <div class="content row">
      <div class="filtro  col-sm-12 col-md-2">
        <p><b>Categoria</b> </p>
        <li><a href="mujeres.html">Mujeres</a></li>
        <li><a href="hombres.html">Hombres</a></li>
        <li><a href="Niños.html">Niños</a></li>
      </div>
      <div id="catalogo" class="catalogo  col-md-10">

        <!-- <div id="product1" class="card col-sm-5 col-md-3 producto">
          <img src="img/cam.jpg" class="card-img-top" alt="..." />
          <img id="vendido1" src="img/Vendido.png" alt="" />
          <div class="card-body">
            <p class="card-text">Camisa Lorenzini</p>
            <h5 class="card-title"><b>S/.78.90</b></h5>
            <button class="btn btn-light" id="button1"
              onclick="obtenerId('product1','vendido1','button1')">Comprar</button>
          </div>
        </div>

        <div id="product2" class="card col-sm-5 col-md-3 producto">
          <img src="img/cam2.jpg" class="card-img-top" alt="..." />
          <img id="vendido2" src="img/Vendido.png" alt="" />
          <div class="card-body">
            <p class="card-text">Camisa Nautica</p>
            <h5 class="card-title"><b>S/.64.90</b></h5>
            <button class="btn btn-light" id="button2"
              onclick="obtenerId('product2','vendido2','button2')">Comprar</button>
          </div>
        </div>

        <div id="product3" class="card col-sm-5 col-md-3 producto">
          <img src="img/cam3.jpg" class="card-img-top" alt="..." />
          <img id="vendido3" src="img/Vendido.png" alt="" />
          <div class="card-body">
            <p class="card-text">Camisa Donatelli</p>
            <h5 class="card-title"><b>S/.84.90</b></h5>
            <button class="btn btn-light" id="button3"
              onclick="obtenerId('product3','vendido3','button3')">Comprar</button>
          </div>
        </div>

        <div id="product4" class="card col-sm-5 col-md-3 producto">
          <img src="img/chomp.jpg" class="card-img-top" alt="..." />
          <img id="vendido4" src="img/Vendido.png" alt="" />
          <div class="card-body">
            <p class="card-text">Chompa Hypnotic</p>
            <h5 class="card-title"><b>S/.89.90</b></h5>
            <button class="btn btn-light" id="button4"
              onclick="obtenerId('product4','vendido4','button4')">Comprar</button>
          </div>
        </div>

        <div id="product5" class="card col-sm-5 col-md-3 producto">
          <img src="img/chomp2.jpg" class="card-img-top" alt="..." />
          <img id="vendido5" src="img/Vendido.png" alt="" />
          <div class="card-body">
            <p class="card-text">Chompa Malabar</p>
            <h5 class="card-title"><b>S/.124.90</b></h5>
            <button class="btn btn-light" id="button5"
              onclick="obtenerId('product5','vendido5','button5')">Comprar</button>
          </div>
        </div>

        <div id="product6" class="card col-sm-5 col-md-3 producto">
          <img src="img/chomp3.jpg" class="card-img-top" alt="..." />
          <img id="vendido6" src="img/Vendido.png" alt="" />
          <div class="card-body">
            <p class="card-text">Chompa Index</p>
            <h5 class="card-title"><b>S/.75.00</b></h5>
            <button class="btn btn-light" id="button6"
              onclick="obtenerId('product6','vendido6','button6')">Comprar</button>
          </div>
        </div>

        <div id="product7" class="card col-sm-5 col-md-3 producto">
          <img src="img/panta.jpg" class="card-img-top" alt="..." />
          <img id="vendido7" src="img/Vendido.png" alt="" />
          <div class="card-body">
            <p class="card-text">Pantalon Drill</p>
            <h5 class="card-title"><b>S/.69.90</b></h5>
            <button class="btn btn-light" id="button7"
              onclick="obtenerId('product7','vendido7'),'button7'">Comprar</button>
          </div>
        </div>

        <div id="product8" class="card col-sm-5 col-md-3 producto">
          <img src="img/panta2.jpg" class="card-img-top" alt="..." />
          <img id="vendido8" src="img/Vendido.png" alt="" />
          <div class="card-body">
            <p class="card-text">Pantalon DKVK</p>
            <h5 class="card-title"><b>S/.79.90</b></h5>
            <button class="btn btn-light" id="button8"
              onclick="obtenerId('product8','vendido8','button8')">Comprar</button>
          </div>
        </div> -->

        

      </div>

      <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
          aria-labelledby="staticBackdropLabel" aria-hidden="true">
          <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                <div class="imgCard"><img id="imgCard" src="" alt=""></div>
                <div class="detalles">
                  <h3 id="modeloCard"></h3>
                  <h1 id="idCard" style="display: none;"></h1>
                  <div class="stars">
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star-half-alt"></i>
                    <span>( 250 )</span>
                  </div>
                  <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Tempora culpa aut sint, autem magnam
                    cupiditate
                  </p>
                  <select class="form-select form-select-sm" aria-label="Default select example" id="tallaCard">
                    <option>Seleccionar talla</option>
                    <option value="1">S</option>
                    <option value="2">M</option>
                    <option value="3">L</option>
                  </select>

                  <div class="col input input-group-sm col col-4 mb-2">
                    <input id="cantCard" type="number" min="1" class="form-control " placeholder="cantidad">
                  </div>


                  <span id="precioCard" class="precio"></span>
                </div>

              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Seguir comprando</button>
                <button type="submit" id="btnSubmit" data-bs-target="#exampleModalToggle2" class="btn btn-primary">
                  Añadir al carrito</button>
              </div>
            </div>
          </div>
        </div>

      <!-- producto flotante -->
      <!-- <div class="productos-preview">

    <div class="preview" data-target="p-1">
      <i class="fas fa-times"></i>
      <img id="imgCard" src="" alt="">
      <h3 id="modeloCard"></h3>
      <div class="stars">
        <i class="fas fa-star"></i>
        <i class="fas fa-star"></i>
        <i class="fas fa-star"></i>
        <i class="fas fa-star"></i>
        <i class="fas fa-star-half-alt"></i>
        <span>( 250 )</span>
      </div>
      <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Tempora culpa aut sint, autem magnam cupiditate
      </p>
      <span id="precioCard" class="precio">20.00</span>
      <div class="botons">
        <a href="#" class="comprarr">Comprar</a>
        <a href="#" class="carrrito">Añadir a carrito</a>
      </div>
    </div>

  </div> -->
    </div>


  </div>

  <footer id="contactanos">
    <div class="info row">
      <div class="col-9 col-sm-10 col-md-3">
        <h2>Contactanos</h2>
        <hr />
        <br />
        <p>
          "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do
          eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim
          ad minim veniam, quis nostrud exercitation
        </p>
      </div>
      <div class="col-9 col-sm-10 col-md-3 redes">
        <h2>Redes Sociales</h2>
        <hr />
        <br />
        <p>Encuentranos en nuestras redes:</p>
        <div class="row">
          <i class="fa-brands fa-facebook col col-sm-3 col-md-3"></i>
          <i class="fa-brands fa-instagram col col-sm-3 col-md-3"></i>
          <i class="fa-brands fa-tiktok col col-sm-3 col-md-3"></i>
        </div>
      </div>
      <div class="col-9 col-sm-10 col-md-3">
        <h2>Ubicanos</h2>
        <hr />
        <br />
        <iframe
          src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d4163.768727653904!2d-77.03714204773314!3d-12.057285241833123!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x9105c8c66039e27f%3A0xf87b9752d3eeb99c!2sGaleria%20COMPUPLAZA!5e0!3m2!1ses-419!2spe!4v1666428705323!5m2!1ses-419!2spe"
          width="600" height="450" style="border: 0" allowfullscreen="" loading="lazy"
          referrerpolicy="no-referrer-when-downgrade"></iframe>
      </div>
    </div>

    <div class="derechos">
      <hr />
      <br />
      <p>© 2022 Goggles. All Rights Reserved | Design by W3layouts</p>
    </div>
  </footer>

  <script src="bootstrap/js/bootstrap.min.js"></script>
  <script src="bootstrap/js/jquery.js"></script>
  <script>

    //Funcion para agregar estado de "Vendido"
    function obtenerId(idProd, idImg, idBtn) {
      class objVenta {
        //Atributos
        idVend;
        idObj;
        btn;

        //Metodo para cambiar la propiedad de opacidad
        ocultarObj() {
          objVen.style.opacity = 0.6;
          objIm.style.opacity = 1;
          objBtn.disabled = true;

        }

      }

      const objVaron = new objVenta;
      objVaron.idVend = idProd;
      objVaron.idObj = idImg;
      objVaron.btn = idBtn;

      let objVen = document.getElementById(objVaron.idVend);
      let objIm = document.getElementById(objVaron.idObj);
      let objBtn = document.getElementById(objVaron.btn);


      objVaron.ocultarObj();
    }



    catalogo = document.getElementById("catalogo");
    function listarProductos() {
      $("#catalogo").html("");
      arrayProductos = JSON.parse(localStorage.getItem("lista_prod"));

      if (arrayProductos === null) {
        arrayProductos = [];
      } else {
        arrayProductos.forEach(elemento => {
          if (elemento.categoria === "hombre") {
            catalogo.innerHTML += `
          <div id="product1" class="card col-sm-5 col-md-3 producto" data-id="${elemento.id}">
          <img src="${elemento.imagen}" class="card-img-top" alt="..." />
          <img id="vendido1" src="${elemento.imagen}" alt="" />
          <div class="card-body">
            <p class="card-text">${elemento.nombre}</p>
            <h5 class="card-title"><b>S/.${elemento.precio}.00</b></h5>
            <button class="btn btn-light" id="button1"
              onclick="obtenerId('product1','vendido1','button1')">Comprar</button>
          </div>
        </div>`;
          }

        });
      }
    }


    function mostrarModal() {
      let mod = document.querySelector('.modal');
      let body = document.querySelectorAll('.modal-body');

      let imgCard = document.getElementById("imgCard");
      let modeloCard = document.getElementById("modeloCard");
      let precioCard = document.getElementById("precioCard");
      let idCard = document.getElementById("idCard");
      let tallaCard = document.getElementById("tallaCard");
      document.querySelectorAll('.card').forEach(card => {
        card.onclick = () => {
          console.log("click");
          //console.log(document.getElementById("staticBackdrop"));

          $('#staticBackdrop').modal('show');
          body.forEach(preview => {
            let imgSeleccionada = card.getElementsByTagName("img")[0].src;
            let modeloSeleccionada = card.getElementsByTagName("p")[0].innerHTML;
            let precioSeleccionada = card.getElementsByTagName("b")[0].innerHTML;
            let idSeleccionada = (card).getAttribute("data-id");

            imgCard.src = imgSeleccionada;
            modeloCard.innerHTML = modeloSeleccionada;
            precioCard.innerHTML = precioSeleccionada;
            idCard.innerHTML = idSeleccionada;
          });
        };
      });
    }

    $("#btnSubmit").click(function(event){

id=document.getElementById("idCard").innerHTML;
console.log("click botn");

var carritoItem = arrayProductos[id-1];
addCarrito(carritoItem.id);
})

let arrayDato=[];

    function crearItem (id,talla,cant){
      let dato={
        id: id,
        talla: talla,
        cantidad: cant
      }
      arrayDato.push(dato);
      return dato;
    }

    function addCarrito(id){
      
      let arrayDato = JSON.parse(localStorage.getItem("miCarrito"));
      var ptalla = $("#tallaCard option:selected").text();
      var pcantidad = $("#cantCard").val();
      
      if (ptalla=="Seleccionar talla" ) {
        alert("Debe seleccionar una talla");
      }else if (pcantidad =="") {
        alert ("Eliga una cantidad")
      }else{
        if (arrayDato==null) {
          arrayDato=[];
          crearItem(id,ptalla,pcantidad);
          console.log(arrayDato);
        } else {

          arrayDato[arrayDato.length]={
            id: id,
            talla: ptalla,
            cantidad: pcantidad
          } ;
          alert("Se ha añadido al carrito");
          console.log(arrayDato);

        }
      }
      localStorage.setItem("miCarrito", JSON.stringify(arrayDato));
    }


    //producto flotante
    /* let preveiwContainer = document.querySelector('.productos-preview');
      let previewBox = preveiwContainer.querySelectorAll('.preview');
  
      let imgCard = document.getElementById("imgCard");
      let modeloCard = document.getElementById("modeloCard");
      let precioCard = document.getElementById("precioCard");
   */
    /*     document.querySelectorAll('.card').forEach(card =>{
          card.onclick = () =>{
            preveiwContainer.style.display = 'flex';
            let name = card.getAttribute('data-name');
    
            previewBox.forEach(preview =>{
    
              let imgSeleccionada = card.getElementsByTagName("img")[0].src;
              let modeloSeleccionada = card.getElementsByTagName("p")[0].innerHTML;
              let precioSeleccionada = card.getElementsByTagName("b")[0].innerHTML;
              
              imgCard.src=imgSeleccionada;
              modeloCard.innerHTML=modeloSeleccionada;
              precioCard.innerHTML=precioSeleccionada;
    
              let target = preview.getAttribute('data-target');
              if(name == target){
                preview.classlist.add("active");
              }
            });
          };
        }); */

    /*  previewBox.forEach(close =>{
       close.querySelector('.fa-times').onclick = () =>{
         close.classList.remove("active");
         preveiwContainer.style.display = 'none';
       }
     }); */

    document.addEventListener('DOMContentLoaded', () => {
      listarProductos();
      //producto flotante

      mostrarModal();
    });
  </script>

</body>

</html>